{% extends 'shared/site.html' %}
{% load static %}

{% block site_content %}
    <h1 class="text-center">Edit Product:</h1>
    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
            <form action="{% url 'edit product' product.id %}"
                  method="post" class="furniture-form" enctype="multipart/form-data">
                {% csrf_token %}

                {{ form.product_type.label }}
                {{ form.product_type }}

                {{ form.product_code.label }}
                {{ form.product_code }}

                {{ form.product_name.label }}
                {{ form.product_name }}

                {{ form.product_description.label }}
                {{ form.product_description }}

                {{ form.product_image.label }}
                {{ form.product_image }}

                <img id="img_preview" class="card-img-top" src="{{ product.product_image.url }}"
                     alt="{{ product.product_name }}">

                <button class="btn btn-primary mt-2" type="submit">Edit</button>
            </form>
        </div>
        <div class="col-lg-3">
            <div class="content">
            <div class="buttons-container">
                <a class="button edit" href="{% url 'list product' %}">All Products</a>
            </div>
        </div>
        </div>
    </div>

    <script>
        function updateImage() {
            let img = document.getElementById('img_preview');
            let url = this.value;
            img.src = url;
        }

        document.getElementById('img_input')
            .addEventListener('input', updateImage);
    </script>

{% endblock %}